<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Modular Text Divider</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>🧩 Modular Text Divider</h1>
    <p>テキストを指定した分割数で周期的に列分割するツールです。</p>
  </header>

  <main>
    <!-- 入力エリア -->
    <section>
      <label for="input-text">📄 入力テキスト:</label>
      <span id="input-char-count" class="char-count">（文字数: 0）</span><br />
      <textarea id="input-text" rows="12" placeholder="ここに暗号文を入力してください"></textarea><br />
      <div class="file-drop-area" id="file-drop-area">
        <input type="file" id="file-input" accept=".txt" />
        <label for="file-input">
          <div class="drop-area-content">
            <span class="drop-icon">📁</span>
            <span class="drop-text">ファイルをドラッグ＆ドロップ<br>または<br>クリックして選択</span>
          </div>
        </label>
      </div>
      <div class="button-group-right">
        <button id="load-sample">🔤 サンプル文を入力</button>
        <button id="clear-button">🧹 クリア</button>
      </div>
    </section>

    <!-- 分割数設定 -->
    <section class="split-control-section">
      <label for="split-count">🔢 分割数 (n):</label>
      <div class="split-controls">
        <input type="number" id="split-count" min="1" max="20" value="3" title="テキストを周期的に分割する列数を指定します（1～20の整数）。例: n=3の場合、1文字目→列1、2文字目→列2、3文字目→列3、4文字目→列1..." />
        <input type="range" id="split-slider" min="1" max="20" value="3" list="tickmarks" />
        <datalist id="tickmarks">
          <option value="1"></option>
          <option value="3"></option>
          <option value="5"></option>
          <option value="9"></option>
          <option value="13"></option>
          <option value="17"></option>
          <option value="20"></option>
        </datalist>
      </div>
      <div class="slider-labels">
        <span class="label-1">1</span>
        <span></span>
        <span class="mark label-3">3</span>
        <span></span>
        <span class="mark label-5">5</span>
        <span></span>
        <span></span>
        <span></span>
        <span class="mark label-9">9</span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span class="label-20">20</span>
      </div>
      <div id="split-error" class="error-message"></div>
    </section>

    <!-- オプション -->
    <section>
      <fieldset>
        <legend>⚙️ テキスト処理オプション</legend>
        <label><input type="checkbox" id="uppercase" /> 小文字を大文字に変換</label><br />
        <label><input type="checkbox" id="alpha-only" /> アルファベット以外を除去</label><br />
        <label><input type="checkbox" id="remove-spaces" /> スペースを除去</label>
      </fieldset>
    </section>

    <!-- 処理後テキスト -->
    <section>
      <label for="processed-text">📝 処理後のテキスト:</label>
      <span id="processed-char-count" class="char-count">（文字数: 0）</span><br />
      <textarea id="processed-text" rows="4" readonly></textarea>
    </section>

    <!-- 列分割ボタン -->
    <section>
      <button id="split-button">✂️ 列分割する</button>
    </section>
  </main>

  <!-- 結果表示エリア -->
  <div id="results-container" style="display: none;">
    <section id="output-area"></section>

    <!-- エクスポート設定 -->
    <section id="export-section">
      <div class="export-controls">
        <button id="export-csv">📥 CSVとしてエクスポート</button>
        <label class="export-option">
          <input type="checkbox" id="csv-with-index" />
          拡張形式（元インデックス付き）でエクスポート
        </label>
      </div>
    </section>
  </div>

  <footer>
    <div class="footer">
      🔗 GitHubリポジトリはこちら（ <a href="https://github.com/ipusiron/modular-text-divider" target="_blank">ipusiron/modular-text-divider</a> ）
    </div>
  </footer>

  <script src="script.js"></script>
</body>
</html>
